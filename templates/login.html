<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¡œê·¸ì¸ ë° íšŒì›ê°€ì…</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #f7f7f7;
            margin: 0;
        }

        .header {
            background-color: #1abc9c;
            color: white;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header h1 {
            font-size: 1.8rem;
            margin: 0;
        }

        .nav-links {
            display: flex;
            gap: 15px;
        }

        .nav-links a {
            color: white;
            text-decoration: none;
            font-size: 1rem;
        }

        .nav-links a:hover {
            text-decoration: underline;
        }

        .password-container {
            position: relative;
        }

        .toggle-password {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            cursor: pointer;
        }

        .signup-section {
            display: none;
        }

        .terms-section {
            background: none;
            padding: 20px;
            color: #2c3e50;
            line-height: 1.6;
        }

        .btn-custom {
            border-radius: 20px;
            font-weight: bold;
        }

        .btn-custom-primary {
            background: #34495e;
            color: white;
        }

        .btn-custom-primary:hover {
            background: #2c3e50;
        }

        .btn-custom-secondary {
            background: #27ae60;
            color: white;
        }

        .btn-custom-secondary:hover {
            background: #1e8449;
        }
    </style>
</head>

<body>
    <header class="header">
        <h1>K-MEDICAL</h1>
        <nav class="nav-links">
            <a href="/">í™ˆí™”ë©´ìœ¼ë¡œ ëŒì•„ê°€ê¸°</a>
        </nav>
    </header>

    <section class="py-5">
        <div class="text-center mb-4">
            <h2 id="login-header" class="text-dark">ë¡œê·¸ì¸</h2>
        </div>
        <form id="login-form" class="d-flex flex-column align-items-center">
            <input name="username" type="text" id="login-username" class="form-control my-3 w-50" placeholder="ì•„ì´ë””"
                required>
            <div class="password-container w-50">
                <input name="password" type="password" id="login-password" class="form-control my-3" placeholder="ë¹„ë°€ë²ˆí˜¸"
                    required>
                <span class="toggle-password">ğŸ‘ï¸</span>
            </div>
            <button type="submit" class="btn btn-custom btn-custom-primary w-50 py-2">ë¡œê·¸ì¸</button>
        </form>
        <div class="text-center mt-3">
            <button id="show-signup" class="btn btn-link">íšŒì›ê°€ì…</button>
        </div>
    </section>

    <section id="signup-section" class="py-5" style="display: none;">
        <div class="text-center mb-4">
            <h2 id="signup-header" class="text-dark">íšŒì›ê°€ì…</h2>
        </div>
        <form id="signup-form" class="d-flex flex-column align-items-center" action="/signup" method="post">
            <input type="text" name="username" class="form-control my-3 w-50" placeholder="ì•„ì´ë””" required>
            <div class="password-container w-50">
                <input type="password" name="password" id="signup-password" class="form-control my-3" placeholder="ë¹„ë°€ë²ˆí˜¸"
                    required>
                <span class="toggle-password">ğŸ‘ï¸</span>
            </div>
            <div class="password-container w-50">
                <input type="password" name="confirm_password" id="confirm-password" class="form-control my-3"
                    placeholder="ë¹„ë°€ë²ˆí˜¸ í™•ì¸" required>
                <span class="toggle-password">ğŸ‘ï¸</span>
            </div>
            <input type="email" name="email" class="form-control my-3 w-50" placeholder="ì´ë©”ì¼" required>
            <input type="text" name="diet" class="form-control my-3 w-50" placeholder="ì‹ìŠµê´€ (ì˜ˆ: ì±„ì‹, ì¼ë°˜)" required>
            <input type="text" name="location" class="form-control my-3 w-50" placeholder="ê±°ì£¼ ì§€ì—­" required>
            <input type="number" name="height" id="height" class="form-control my-3 w-50" placeholder="í‚¤ (cm)" required>
            <input type="number" name="weight" id="weight" class="form-control my-3 w-50" placeholder="ëª¸ë¬´ê²Œ (kg)"
                required>
            <textarea name="family_history" class="form-control my-3 w-50" placeholder="ê°€ì¡± ë³‘ë ¥ (ì„ íƒ ì‚¬í•­)"></textarea>
            <div class="terms-section my-4">
                <h3 class="text-center mb-3">ê°œì¸ì •ë³´ ì´ìš©ì•½ê´€</h3>
                <div class="terms-box">
                    <h5><strong>ì œ1ì¥: ê°œì¸ì •ë³´ ì²˜ë¦¬ ë°©ì¹¨</strong></h5>
                    <p>ë³¸ ì•½ê´€ì€ ê°œì¸ì •ë³´ ë³´í˜¸ë²• ë° ê´€ë ¨ ë²•ë ¹ì— ë”°ë¼ ì‘ì„±ë˜ì—ˆìœ¼ë©°, íšŒì›ì˜ ì†Œì¤‘í•œ ê°œì¸ì •ë³´ë¥¼ ë³´í˜¸í•˜ê³  ì•ˆì „í•˜ê²Œ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ ë‹¤ìŒê³¼ ê°™ì€ ì›ì¹™ì„ ì¤€ìˆ˜í•©ë‹ˆë‹¤:</p>

                    <h5><strong>ì œ2ì¥: ê°œì¸ì •ë³´ ìˆ˜ì§‘ ë° ì´ìš© ëª©ì </strong></h5>
                    <ol>
                        <li>íšŒì› ì¸ì¦ ë° ë¡œê·¸ì¸ ê¸°ëŠ¥ ì œê³µ.</li>
                        <li>ê°œì¸ ë§ì¶¤í˜• ê±´ê°• ì •ë³´ ë° ì„œë¹„ìŠ¤ ì œê³µ.</li>
                        <li>BMI ê³„ì‚° ë° ê±´ê°•ê´€ë¦¬ ì¶”ì²œ ì„œë¹„ìŠ¤ í™œìš©.</li>
                        <li>íšŒì›ê³¼ì˜ ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ì„ ìœ„í•œ ì´ë©”ì¼ ë° ì—°ë½ì²˜ ì •ë³´ ì‚¬ìš©.</li>
                        <li>ë‚´ë¶€ ë°ì´í„° ë¶„ì„ ë° ì„œë¹„ìŠ¤ ê°œì„ .</li>
                    </ol>

                    <h5><strong>ì œ3ì¥: ìˆ˜ì§‘í•˜ëŠ” ê°œì¸ì •ë³´ í•­ëª©</strong></h5>
                    <p>í•„ìˆ˜ í•­ëª©:</p>
                    <ul>
                        <li>ì•„ì´ë””</li>
                        <li>ë¹„ë°€ë²ˆí˜¸</li>
                        <li>ì´ë©”ì¼</li>
                        <li>í‚¤</li>
                        <li>ëª¸ë¬´ê²Œ</li>
                        <li>ì‹ìŠµê´€</li>
                    </ul>
                    <p>ì„ íƒ í•­ëª©:</p>
                    <ul>
                        <li>ê°€ì¡± ë³‘ë ¥</li>
                    </ul>

                    <h5><strong>ì œ4ì¥: ê°œì¸ì •ë³´ì˜ ë³´ìœ  ë° íŒŒê¸°</strong></h5>
                    <ol>
                        <li>íšŒì› íƒˆí‡´ ì‹œ ì¦‰ì‹œ ëª¨ë“  ê°œì¸ì •ë³´ë¥¼ íŒŒê¸°í•©ë‹ˆë‹¤.</li>
                        <li>ê´€ë ¨ ë²•ë ¹ì—ì„œ ìš”êµ¬í•˜ëŠ” ê²½ìš°, í•´ë‹¹ ê¸°ê°„ ë™ì•ˆ ê°œì¸ì •ë³´ë¥¼ ì•ˆì „í•˜ê²Œ ë³´ê´€í•©ë‹ˆë‹¤.</li>
                        <li>ì „ìì  íŒŒì¼ í˜•íƒœì˜ ì •ë³´ëŠ” ë³µêµ¬ ë¶ˆê°€ëŠ¥í•œ ë°©ë²•ìœ¼ë¡œ ì˜êµ¬ ì‚­ì œí•˜ë©°, ì¢…ì´ ë¬¸ì„œëŠ” ë¶„ì‡„ê¸°ë¡œ íŒŒê¸°í•©ë‹ˆë‹¤.</li>
                    </ol>

                    <h5><strong>ì œ5ì¥: ê°œì¸ì •ë³´ì˜ ì œ3ì ì œê³µ</strong></h5>
                    <p>íšŒì›ì˜ ë™ì˜ ì—†ì´ ê°œì¸ì •ë³´ë¥¼ ì œ3ìì—ê²Œ ì œê³µí•˜ì§€ ì•Šìœ¼ë©°, ë‹¤ìŒì˜ ê²½ìš°ì—ë§Œ ì œê³µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:</p>
                    <ul>
                        <li>ë²•ë ¹ì—ì„œ ìš”êµ¬í•˜ëŠ” ê²½ìš°.</li>
                        <li>íšŒì›ì˜ ë™ì˜ë¥¼ ë°›ì€ ê²½ìš°.</li>
                    </ul>

                    <h5><strong>ì œ6ì¥: ê°œì¸ì •ë³´ì˜ ì•ˆì „ì„± í™•ë³´ ì¡°ì¹˜</strong></h5>
                    <ol>
                        <li>SSL ì•”í˜¸í™” ê¸°ìˆ ì„ ì‚¬ìš©í•˜ì—¬ ë°ì´í„° ì „ì†¡ ë³´í˜¸.</li>
                        <li>ì¤‘ìš” ì •ë³´ëŠ” ì•”í˜¸í™”í•˜ì—¬ ì €ì¥.</li>
                        <li>ë‚´ë¶€ì ìœ¼ë¡œ ë°ì´í„° ì ‘ê·¼ ê¶Œí•œì„ ì œí•œ.</li>
                        <li>ì •ê¸°ì ì¸ ë³´ì•ˆ ì ê²€ ë° ì¹¨ì… íƒì§€ ì‹œìŠ¤í…œ ìš´ì˜.</li>
                    </ol>

                    <h5><strong>ì œ7ì¥: íšŒì›ì˜ ê¶Œë¦¬</strong></h5>
                    <p>íšŒì›ì€ ì–¸ì œë“ ì§€ ë³¸ì¸ì˜ ê°œì¸ì •ë³´ì— ëŒ€í•´ ë‹¤ìŒê³¼ ê°™ì€ ê¶Œë¦¬ë¥¼ í–‰ì‚¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:</p>
                    <ul>
                        <li>ê°œì¸ì •ë³´ ì—´ëŒ ìš”ì²­</li>
                        <li>ê°œì¸ì •ë³´ ìˆ˜ì • ìš”ì²­</li>
                        <li>ê°œì¸ì •ë³´ ì‚­ì œ ìš”ì²­</li>
                        <li>ê°œì¸ì •ë³´ ì²˜ë¦¬ ì œí•œ ìš”ì²­</li>
                    </ul>

                    <h5><strong>ì œ8ì¥: ë¬¸ì˜</strong></h5>
                    <p>ê°œì¸ì •ë³´ ê´€ë ¨ ë¬¸ì˜ ì‚¬í•­ì€ ì•„ë˜ì˜ ì—°ë½ì²˜ë¡œ ë¬¸ì˜í•´ ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤:</p>
                    <ul>
                        <li>ì´ë©”ì¼: jinstartup@gmail.com</li>
                        <li>ìš´ì˜ ì‹œê°„: í‰ì¼ 09:00 - 18:00</li>
                    </ul>
                </div>
                <div class="form-check mt-3">
                    <input type="radio" name="terms" id="agree" class="form-check-input" required>
                    <label for="agree" class="form-check-label">ë™ì˜í•¨</label>
                </div>
                <div class="form-check">
                    <input type="radio" name="terms" id="disagree" class="form-check-input">
                    <label for="disagree" class="form-check-label">ë™ì˜ì•ˆí•¨</label>
                </div>
            </div>

            <style>
                .terms-box {
                    background: #ffffff;
                    border-radius: 10px;
                    padding: 15px;
                    height: 250px;
                    overflow-y: auto;
                    box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);
                }

                .terms-section h5 {
                    color: #34495e;
                    font-weight: bold;
                }

                .terms-section ul,
                .terms-section ol {
                    padding-left: 20px;
                }

                .terms-section p,
                .terms-section li {
                    line-height: 1.6;
                }
            </style>

            <button type="submit" id="signup-button" class="btn btn-custom btn-custom-secondary w-50 py-2"
                disabled>íšŒì›ê°€ì…</button>
        </form>
        <div class="text-center mt-3">
            <button id="back-to-login" class="btn btn-link">ë¡œê·¸ì¸ í™”ë©´ìœ¼ë¡œ</button>
        </div>
    </section>

    <script>
        $(document).ready(function () {
            // ë¡œê·¸ì¸ ì²˜ë¦¬
            $('#login-form').on('submit', function (event) {
                event.preventDefault();

                // ì…ë ¥ê°’ ê°€ì ¸ì˜¤ê¸°
                const username = $('#login-username').val();
                const password = $('#login-password').val();

                // AJAX ìš”ì²­
                $.ajax({
                    url: '/login',
                    type: 'POST',
                    contentType: 'application/x-www-form-urlencoded', // ì„œë²„ê°€ form ë°ì´í„°ë¥¼ ê¸°ëŒ€í•¨
                    data: {
                        username: username,
                        password: password
                    },
                    success: function (response) {
                        // ì„±ê³µ ë©”ì‹œì§€ì™€ ë¦¬ë‹¤ì´ë ‰ì…˜ ì²˜ë¦¬
                        alert(response.message);
                        window.location.href = response.redirect;
                    },
                    error: function (xhr) {
                        // ì—ëŸ¬ í•¸ë“¤ë§ ë° ë””ë²„ê¹…
                        console.error("XHR:", xhr); // ë¸Œë¼ìš°ì € ì½˜ì†”ì— XHR ê°ì²´ ì¶œë ¥
                        if (xhr.responseJSON && xhr.responseJSON.error) {
                            alert(xhr.responseJSON.error);
                        } else {
                            alert("ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
                        }
                    }
                });
            });

            // íšŒì›ê°€ì… ë²„íŠ¼ í™œì„±í™”
            $('input[name="terms"]').on('change', function () {
                if ($('#agree').is(':checked')) {
                    $('#signup-button').prop('disabled', false);
                } else {
                    $('#signup-button').prop('disabled', true);
                }
            });

            // íšŒì›ê°€ì… ì²˜ë¦¬
            $('#signup-form').on('submit', function (event) {
                event.preventDefault();

                // AJAX ìš”ì²­
                $.ajax({
                    url: '/signup',
                    type: 'POST',
                    contentType: 'application/x-www-form-urlencoded',
                    data: $(this).serialize(),
                    success: function (response) {
                        // ì„±ê³µ ë©”ì‹œì§€ì™€ ë¦¬ë‹¤ì´ë ‰ì…˜ ì²˜ë¦¬
                        alert("íšŒì›ê°€ì…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤! ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.");
                        window.location.href = "/login";
                    },
                    error: function (xhr) {
                        // ì—ëŸ¬ í•¸ë“¤ë§ ë° ë””ë²„ê¹…
                        console.error("XHR:", xhr); // ë¸Œë¼ìš°ì € ì½˜ì†”ì— XHR ê°ì²´ ì¶œë ¥
                        if (xhr.responseJSON && xhr.responseJSON.error) {
                            alert("íšŒì›ê°€ì… ì‹¤íŒ¨: " + xhr.responseJSON.error);
                        } else {
                            alert("íšŒì›ê°€ì… ì¤‘ ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
                        }
                    }
                });
            });

            // ë¹„ë°€ë²ˆí˜¸ ê°€ì‹œì„± í† ê¸€
            $(".toggle-password").on("click", function () {
                const input = $(this).prev("input");
                const type = input.attr("type") === "password" ? "text" : "password";
                input.attr("type", type);
            });

            // íšŒì›ê°€ì… í¼ í† ê¸€
            $("#show-signup").click(function () {
                $("#signup-section").slideToggle();
            });

            // ë¡œê·¸ì¸ í™”ë©´ìœ¼ë¡œ ëŒì•„ê°€ê¸°
            $("#back-to-login").click(function () {
                $("#signup-section").slideUp();
            });
        });
    </script>

</body>

</html>